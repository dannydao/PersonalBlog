{% load static %}
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>{% block title %}{{ post.title }} Â· The Blog{% endblock %}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="{% static 'css/s_lite.css' %}">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    </head>
    <body>
        <div class="app">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="brand">
                    <i class="bi bi-journal-richtext"></i>
                    <a href="{% url 'post_list' %}">The Blog</a>
                </div>
                
                <nav class="nav">
                    <a class="nav-item {% if request.resolver_match.url_name == 'post_list' %}active{% endif %}" href="{% url 'post_list' %}">
                        <i class="bi bi-house-fill"></i><span>Home</span>
                    </a>
                    {% if user.is_authenticated %}
                    <a class="nav-item {% if request.resolver_match.url_name == 'my_posts' %}active{% endif %}" href="{% url 'my_posts' %}">
                        <i class="bi bi-person-lines-fill"></i><span>My Posts</span>
                    </a>
                    <a class="nav-item {% if request.resolver_match.url_name == 'post_create' %}active{% endif %}" href="{% url 'post_create' %}">
                        <i class="bi bi-plus-circle-fill"></i><span>New Post</span>
                    </a>
                    {% endif %}
                </nav>

                <nav class="nav secondary">
                    {% if user.is_authenticated %}
                        <a class="nav-item" href="{% url 'logout' %}"><i class="bi bi-box-arrow-right"><span>Logout</span></i></a>
                    {% else %}
                        <a class="nav-item" href="{% url 'login' %}"><i class="bi bi-box-arrow-in-right"><span>Login</span></i></a>
                        <a class="nav-item" href="{% url 'signup' %}"><i class="bi bi-person-plus-fill"><span>Signup</span></i></a>
                    {% endif %}
                </nav>
            </aside>

            <!-- Main -->
             <div class="main">
                <header class="topbar">
                    <button class="hamburger" id="menu-toggle" aria-label="Toggle menu"><i class="bi bi-list"></i></button>
                    <div class="search">
                        <i class="bi bi-search"></i>
                        <form method="get" action="{% url 'post_list' %}">
                            <input name="q" value="{{ q|default:'' }}" placeholder="Search posts...">
                        </form>
                    </div>
                    <div class="whoami">
                        {% if user.is_authenticated %}
                            <i class="bi bi-person-circle"></i> {{ user.username }}
                        {% else %}
                            <span class="muted">Guest</span>
                        {% endif %}
                    </div>
                </header>

                <main class="content">
                    {% if messages %}
                        {% for m in messages %}<div class="alert">{{ m }}</div>{% endfor %}
                    {% endif %}
                    {% block content %}{% endblock %}
                </main>
             </div>
        </div>

        <script src="{% static 'js/s_lite.js' %}"></script>
    </body>
</html>